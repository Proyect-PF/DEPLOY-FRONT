{"ast":null,"code":"import axios from\"axios\";import{ActionType}from\"../action-types\";import Swal from\"sweetalert2\";//AL: Here we're defining the actions to be consumed in the components\n// Funcion que retorna Productos desde la API\nexport var fetch_products=function fetch_products(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return function(dispatch){var payload=[];axios.get(\"/products/?\".concat(query)).then(function(res){payload=res.data;// ENVIAMOS PAYLOAD A REDUX\ndispatch({type:ActionType.GET_ALL_PRODUCTS,payload:payload});});};};{/** \nexport const fetch_products = (color: string | null = null) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let payload: ProductState[\"productList\"] = [];\n    let url = `http://localhost:3700/products`;\n    if (color) {\n      url += `?filter={\"color\": \"${color}\"}`;\n      console.log(url)\n    }\n    axios.get(url).then((res) => {\n      payload = res.data;\n\n      // ENVIAMOS PAYLOAD A REDUX\n      dispatch({\n        type: ActionType.GET_ALL_PRODUCTS,\n        payload,\n      });\n    });\n  };\n};*/}// Funcion que retorna un Producto desde la API segun nombre\n// Requiere un String como parametro\nexport var fetch_product_byname=function fetch_product_byname(name){return function(dispatch){var payload=[];axios.get(\"/products/search/\".concat(name)).then(function(res){payload=res.data;// ENVIAMOS PAYLOAD A REDUX\ndispatch({type:ActionType.SEARCH_PRODUCTS,payload:payload});}).catch(function(err){console.log(err);window.alert(err.message);});};};// Funcion que envia un Producto a la API para ser creado.\n// Requiere Payload:Product\nexport var create_product=function create_product(payload){return function(dispatch){axios({method:\"post\",url:\"/products/new\",data:payload}).then(function(){return(// ENVIAMOS PAYLOAD A REDUX\ndispatch({type:ActionType.ADD_PRODUCT,payload:payload}));});};};// Funcion que retorna un Producto desde la API segun id\n// Requiere un Number como parametro\nexport var fetch_product_detail=function fetch_product_detail(id){return function(dispatch){var product={id:0,name:\"\",description:\"\",S:0,M:0,L:0,XL:0,price:0,color:\"\",show_in_shop:true,image:\"\"};axios.get(\"/products/\".concat(id)).then(function(res){var _res$data;if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.id){product={id:res.data.id,name:res.data.name,description:res.data.description,S:res.data.S,M:res.data.M,L:res.data.L,XL:res.data.XL,price:res.data.price,color:res.data.color,show_in_shop:res.data.show_in_shop,image:res.data.image};}// ENVIAMOS PAYLOAD A REDUX\ndispatch({type:ActionType.GET_PRODUCT_DETAILS,payload:product});});};};// Funcion que retorna Productos desde la API de manera filtrada\n// Requiere una query String como parametro. A EXTENDER !\nexport var fetch_filtered_products=function fetch_filtered_products(query){return function(dispatch){var payload=[];axios.get(\"/products/filtered/?\".concat(query)).then(function(response){if(response.data){payload=response.data;// ENVIAMOS PAYLOAD A REDUX\ndispatch({type:ActionType.FILTER_PRODUCTS,payload:payload});}});};};export var updateRender=function updateRender(payload){return function(dispatch){dispatch({type:ActionType.UPDATE_RENDER,payload:payload});};};export var adminLog=function adminLog(){return function(dispatch){dispatch({type:ActionType.ADMIN_LOGIN});};};export var addCheckout=function addCheckout(payload){return function(dispatch){dispatch({type:ActionType.ADD_CHECKOUT,payload:payload});};};export var removeCheckout=function removeCheckout(payload){return function(dispatch){dispatch({type:ActionType.REMOVE_CHECKOUT,payload:payload});};};export var userRegister=function userRegister(user){console.log(\"a\");// return (dispatch: Dispatch<ActionUser>)=> {\naxios.post(\"/auth/signup\",user).then(function(response){var data=response.data;console.log(data);Swal.fire(\"Gracias por registrarte\",\"\",\"success\");// dispatch({\n//   type: ActionType.GET_TOKEN_USER_LOG,\n//   payload: \"\"\n// })\n}).catch(function(err){return alert(err.response.data.message);});// }\n};export var userLog=function userLog(user){// return (dispatch: Dispatch<ActionUser>)=> {\naxios.post(\"/auth/signin\",user).then(function(response){console.log(response.data);Swal.fire(\"Bienvenido\",\"\",\"success\");//   dispatch({\n//     type: ActionType.GET_TOKEN_USER_LOG,\n//     payload: \"\"\n//   })\n}).catch(function(err){return alert(err.response.data.message);});// }\n};","map":{"version":3,"names":["axios","ActionType","Swal","fetch_products","query","dispatch","payload","get","then","res","data","type","GET_ALL_PRODUCTS","fetch_product_byname","name","SEARCH_PRODUCTS","catch","err","console","log","window","alert","message","create_product","method","url","ADD_PRODUCT","fetch_product_detail","id","product","description","S","M","L","XL","price","color","show_in_shop","image","GET_PRODUCT_DETAILS","fetch_filtered_products","response","FILTER_PRODUCTS","updateRender","UPDATE_RENDER","adminLog","ADMIN_LOGIN","addCheckout","ADD_CHECKOUT","removeCheckout","REMOVE_CHECKOUT","userRegister","user","post","fire","userLog"],"sources":["/Users/alejandroasor/Desktop/DEPLOY-FRONT/client/src/state/action-creators/index.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { Dispatch } from \"redux\";\nimport { ActionType } from \"../action-types\";\nimport { ActionCheckout, ActionProducts, ActionUser } from \"../actions\";\nimport {\n  Checkout,\n  Product,\n  ProductState,\n  User,\n  UserLog,\n  UserRegister,\n} from \"../types\";\nimport Swal from \"sweetalert2\";\n//AL: Here we're defining the actions to be consumed in the components\n\n// Funcion que retorna Productos desde la API\n\nexport const fetch_products = (query: string | null = null) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let payload: ProductState[\"productList\"] = [];\n    axios.get(`/products/?${query}`).then((res) => {\n      payload = res.data;\n      // ENVIAMOS PAYLOAD A REDUX\n      dispatch({\n        type: ActionType.GET_ALL_PRODUCTS,\n        payload,\n      });\n    });\n  };\n};\n\n{\n  /** \nexport const fetch_products = (color: string | null = null) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let payload: ProductState[\"productList\"] = [];\n    let url = `http://localhost:3700/products`;\n    if (color) {\n      url += `?filter={\"color\": \"${color}\"}`;\n      console.log(url)\n    }\n    axios.get(url).then((res) => {\n      payload = res.data;\n\n      // ENVIAMOS PAYLOAD A REDUX\n      dispatch({\n        type: ActionType.GET_ALL_PRODUCTS,\n        payload,\n      });\n    });\n  };\n};*/\n}\n// Funcion que retorna un Producto desde la API segun nombre\n// Requiere un String como parametro\nexport const fetch_product_byname = (name: string) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let payload: ProductState[\"productList\"] = [];\n    axios\n      .get(`/products/search/${name}`)\n      .then((res) => {\n        payload = res.data;\n\n        // ENVIAMOS PAYLOAD A REDUX\n        dispatch({\n          type: ActionType.SEARCH_PRODUCTS,\n          payload,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        window.alert(err.message);\n      });\n  };\n};\n\n// Funcion que envia un Producto a la API para ser creado.\n// Requiere Payload:Product\nexport const create_product = (payload: Product) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    axios({\n      method: \"post\",\n      url: \"/products/new\",\n      data: payload,\n    }).then(() =>\n      // ENVIAMOS PAYLOAD A REDUX\n      dispatch({\n        type: ActionType.ADD_PRODUCT,\n        payload,\n      })\n    );\n  };\n};\n\n// Funcion que retorna un Producto desde la API segun id\n// Requiere un Number como parametro\nexport const fetch_product_detail = (id: number) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let product: Product = {\n      id: 0,\n      name: \"\",\n      description: \"\",\n      S: 0,\n      M: 0,\n      L: 0,\n      XL: 0,\n      price: 0,\n      color: \"\",\n      show_in_shop: true,\n      image: \"\",\n    };\n    axios.get(`/products/${id}`).then((res) => {\n      if (res.data?.id) {\n        product = {\n          id: res.data.id,\n          name: res.data.name,\n          description: res.data.description,\n          S: res.data.S,\n          M: res.data.M,\n          L: res.data.L,\n          XL: res.data.XL,\n          price: res.data.price,\n          color: res.data.color,\n          show_in_shop: res.data.show_in_shop,\n          image: res.data.image,\n        };\n      }\n\n      // ENVIAMOS PAYLOAD A REDUX\n      dispatch({\n        type: ActionType.GET_PRODUCT_DETAILS,\n        payload: product,\n      });\n    });\n  };\n};\n\n// Funcion que retorna Productos desde la API de manera filtrada\n// Requiere una query String como parametro. A EXTENDER !\nexport const fetch_filtered_products = (query: string) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    let payload: ProductState[\"productList\"] = [];\n    axios\n      .get(`/products/filtered/?${query}`)\n      .then((response) => {\n        if (response.data) {\n          payload = response.data;\n\n          // ENVIAMOS PAYLOAD A REDUX\n          dispatch({\n            type: ActionType.FILTER_PRODUCTS,\n            payload,\n          });\n        }\n      });\n  };\n};\n\nexport const updateRender = (payload: boolean) => {\n  return (dispatch: Dispatch<ActionProducts>) => {\n    dispatch({\n      type: ActionType.UPDATE_RENDER,\n      payload,\n    });\n  };\n};\n\nexport const adminLog = () => {\n  return (dispatch: Dispatch<ActionUser>) => {\n    dispatch({\n      type: ActionType.ADMIN_LOGIN,\n    });\n  };\n};\n\nexport const addCheckout = (payload: Checkout) => {\n  return (dispatch: Dispatch<ActionCheckout>) => {\n    dispatch({\n      type: ActionType.ADD_CHECKOUT,\n      payload,\n    });\n  };\n};\n\nexport const removeCheckout = (payload: string) => {\n  return (dispatch: Dispatch<ActionCheckout>) => {\n    dispatch({\n      type: ActionType.REMOVE_CHECKOUT,\n      payload,\n    });\n  };\n};\n\nexport const userRegister = (user: UserRegister) => {\n  console.log(\"a\");\n  // return (dispatch: Dispatch<ActionUser>)=> {\n  axios\n    .post(`/auth/signup`, user)\n    .then((response) => {\n      const data = response.data;\n      console.log(data);\n      Swal.fire(\"Gracias por registrarte\", \"\", \"success\");\n      // dispatch({\n      //   type: ActionType.GET_TOKEN_USER_LOG,\n      //   payload: \"\"\n      // })\n    })\n    .catch((err) => alert(err.response.data.message));\n  // }\n};\n\nexport const userLog = (user: UserLog) => {\n  // return (dispatch: Dispatch<ActionUser>)=> {\n  axios\n    .post(`/auth/signin`, user)\n    .then((response) => {\n      console.log(response.data);\n      Swal.fire(\"Bienvenido\", \"\", \"success\");\n      //   dispatch({\n      //     type: ActionType.GET_TOKEN_USER_LOG,\n      //     payload: \"\"\n      //   })\n    })\n    .catch((err) => alert(err.response.data.message));\n\n  // }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}