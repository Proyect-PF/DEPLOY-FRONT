{"ast":null,"code":"import _slicedToArray from\"/Users/alejandroasor/Desktop/DEPLOY-FRONT/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{useLocation,useNavigate}from'react-router-dom';import{bindActionCreators}from'redux';import imageB from'../../assets/images/remeras/unbardo-07B.png';//import imageF from '../../assets/images/remeras/unbardo-07F.png';\nimport Button from'../../components/Buttons/Button/Button';import AmountInput from'../../components/Inputs/Amount/AmountInput';import SizeSelector from'../../components/Inputs/SizeSelector/SizeSelector';import{actionCreators}from'../../state';import{getItem}from'../../utils/localStorage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Details=function Details(){var location=useLocation();var dispatch=useDispatch();var navigate=useNavigate();var _bindActionCreators=bindActionCreators(actionCreators,dispatch),fetch_product_detail=_bindActionCreators.fetch_product_detail;var _bindActionCreators2=bindActionCreators(actionCreators,dispatch),addCheckout=_bindActionCreators2.addCheckout;var _useSelector=useSelector(function(state){return state.products;}),productDetails=_useSelector.productDetails;//AL: loading state for loading implementation (done)\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//AL: show state for changing between front / back image of the product (functional but\n// needs to be rewired to future implementation)\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];//AL: size / amount state retrieve the selection for future add to cart implementation\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),ammount=_useState6[0],setAmmount=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),size=_useState8[0],setSize=_useState8[1];//AL:retrieve the id from the url & transform to number to match type\nvar idS=location.pathname.split('/')[2];var id=Number(idS);//AL:Same loading implementation as HOME page\nuseEffect(function(){setLoading(true);fetch_product_detail(id);},[dispatch,id]);//AL: Check if the data is correct (see getProductDetails action for context), needs to be rewired\n//  but functional for now.\nuseEffect(function(){setLoading(true);!productDetails.show_in_shop&&navigate('/');if(productDetails.name!=='')setLoading(false);},[productDetails]);//AL: this function controll the  show state (see states for context)\n// const handleShow = (): void => {\n//   show ? setShow(false) : setShow(true);\n// };\n//AL: this function manages the add to cart functionality, needs to be implemented\nvar handleCart=function handleCart(e){e.preventDefault();var payload={id:productDetails.id+'-'+size,name:productDetails.name,size:size,price:productDetails.price,ammount:ammount,imgF:productDetails.image};addCheckout(payload);setSize('');setAmmount(1);};var stockSize=function stockSize(size){var checkoutList=getItem(\"shoppingBag\");if(size===\"S\"){if((checkoutList===null||checkoutList===void 0?void 0:checkoutList.length)>0){var findCard=checkoutList.find(function(x){return x.id===productDetails.id+\"-S\";});if(findCard){return productDetails.S-findCard.ammount;}}return productDetails.S;}if(size===\"L\"){if((checkoutList===null||checkoutList===void 0?void 0:checkoutList.length)>0){var _findCard=checkoutList.find(function(x){return x.id===productDetails.id+\"-L\";});if(_findCard){return productDetails.L-_findCard.ammount;}}return productDetails.L;}if(size===\"M\"){if((checkoutList===null||checkoutList===void 0?void 0:checkoutList.length)>0){var _findCard2=checkoutList.find(function(x){return x.id===productDetails.id+\"-M\";});if(_findCard2){return productDetails.M-_findCard2.ammount;}}return productDetails.M;}if(size===\"XL\"){if((checkoutList===null||checkoutList===void 0?void 0:checkoutList.length)>0){var _findCard3=checkoutList.find(function(x){return x.id===productDetails.id+\"-XL\";});if(_findCard3){return productDetails.XL-_findCard3.ammount;}}return productDetails.XL;}else{return 1;}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"my-8 flex justify-center \".concat(!loading?'hidden':'visible'),children:/*#__PURE__*/_jsx(\"div\",{className:\"border-8 border-black border-solid rounded-full w-44 h-44 border-t-transparent animate-spin\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:gap-5 \".concat(loading?'hidden':'visible'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"absolute \".concat(show?'opacity-100':'opacity-0'),alt:\"black tshirt\",src:imageB}),/*#__PURE__*/_jsx(\"img\",{className:\"\",alt:\"black tshirt\",src:productDetails.image})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/5 mx-auto md:flex md:flex-col md:justify-between md:mt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-4xl font-bold \",children:productDetails.name}),/*#__PURE__*/_jsx(\"p\",{className:\"my-2 text-3xl font-bold \",children:\"$ \".concat(productDetails.price)}),/*#__PURE__*/_jsx(\"p\",{className:\"my-2 text-lg italic font-medium font-poppins\",children:\"\".concat(productDetails.description)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-around my-8 text-lg text-center\",children:[/*#__PURE__*/_jsx(SizeSelector,{detailId:productDetails.id,selected:size,sizes:[productDetails.S,productDetails.M,productDetails.L,productDetails.XL],setter:setSize}),/*#__PURE__*/_jsx(AmountInput,{stock:stockSize,size:size,amount:ammount,setter:setAmmount})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col\",children:/*#__PURE__*/_jsx(Button,{className:'justify-center',type:\"button\",text:\"A\\xF1adir al carrito\",onClick:handleCart,name:\"Carrito\",disabled:size===''})})]})]})]})]});};export default Details;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useLocation","useNavigate","bindActionCreators","imageB","Button","AmountInput","SizeSelector","actionCreators","getItem","Details","location","dispatch","navigate","fetch_product_detail","addCheckout","state","products","productDetails","loading","setLoading","show","setShow","ammount","setAmmount","size","setSize","idS","pathname","split","id","Number","show_in_shop","name","handleCart","e","preventDefault","payload","price","imgF","image","stockSize","checkoutList","length","findCard","find","x","S","L","M","XL","description"],"sources":["/Users/alejandroasor/Desktop/DEPLOY-FRONT/client/src/Pages/Details/Details.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { bindActionCreators } from 'redux';\nimport imageB from '../../assets/images/remeras/unbardo-07B.png';\n//import imageF from '../../assets/images/remeras/unbardo-07F.png';\nimport Button from '../../components/Buttons/Button/Button';\nimport AmountInput from '../../components/Inputs/Amount/AmountInput';\nimport SizeSelector from '../../components/Inputs/SizeSelector/SizeSelector';\nimport { actionCreators } from '../../state';\nimport { State } from '../../state/reducers';\n\nimport { getItem } from '../../utils/localStorage';\n\nconst Details = (): JSX.Element => {\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { fetch_product_detail } = bindActionCreators(actionCreators, dispatch);\n  const { addCheckout } = bindActionCreators(actionCreators, dispatch);\n  const { productDetails } = useSelector((state: State) => state.products);\n  //AL: loading state for loading implementation (done)\n  const [loading, setLoading] = useState(true);\n  //AL: show state for changing between front / back image of the product (functional but\n  // needs to be rewired to future implementation)\n  const [show, setShow] = useState(false);\n  //AL: size / amount state retrieve the selection for future add to cart implementation\n  const [ammount, setAmmount] = useState(1);\n  const [size, setSize] = useState('');\n\n  //AL:retrieve the id from the url & transform to number to match type\n  const idS = location.pathname.split('/')[2];\n  const id = Number(idS);\n\n  //AL:Same loading implementation as HOME page\n  useEffect(() => {\n    setLoading(true);\n    fetch_product_detail(id);\n  }, [dispatch, id]);\n\n  //AL: Check if the data is correct (see getProductDetails action for context), needs to be rewired\n  //  but functional for now.\n  useEffect(() => {\n    setLoading(true);\n    !productDetails.show_in_shop && navigate('/');\n    if (productDetails.name !== '') setLoading(false);\n  }, [productDetails]);\n\n  //AL: this function controll the  show state (see states for context)\n  // const handleShow = (): void => {\n  //   show ? setShow(false) : setShow(true);\n  // };\n\n  //AL: this function manages the add to cart functionality, needs to be implemented\n  const handleCart = (e: any) => {\n    e.preventDefault();\n    const payload = {\n      id: productDetails.id + '-' + size,\n      name: productDetails.name,\n      size: size,\n      price: productDetails.price,\n      ammount: ammount,\n      imgF: productDetails.image,\n    };\n    addCheckout(payload);\n    setSize('');\n    setAmmount(1);\n  };\n\n  const stockSize = (size: string) => {\n\n    let checkoutList = getItem(\"shoppingBag\")\n    if(size === \"S\") {\n      if(checkoutList?.length > 0) {\n        let findCard = checkoutList.find((x:any) => x.id === productDetails.id + \"-S\")\n        if(findCard) {\n          return productDetails.S - findCard.ammount\n        }\n      }\n      return productDetails.S\n    }\n    if(size === \"L\") {\n      if(checkoutList?.length > 0) {\n        let findCard = checkoutList.find((x:any) => x.id === productDetails.id + \"-L\")\n        if(findCard) {\n          return productDetails.L - findCard.ammount\n        }\n      }\n      return productDetails.L\n    }\n    if(size === \"M\") {\n      if(checkoutList?.length > 0) {\n        let findCard = checkoutList.find((x:any) => x.id === productDetails.id + \"-M\")\n        if(findCard) {\n          return productDetails.M - findCard.ammount\n        }\n      }\n      return productDetails.M\n    }\n    if(size === \"XL\") {\n      if(checkoutList?.length > 0) {\n        let findCard = checkoutList.find((x:any) => x.id === productDetails.id + \"-XL\")\n        if(findCard) {\n          return productDetails.XL - findCard.ammount\n        }\n      }\n      return productDetails.XL\n    }\n\n    else {\n      return 1;\n    }\n  };\n\n  return (\n    <div>\n      <div\n        className={`my-8 flex justify-center ${\n          !loading ? 'hidden' : 'visible'\n        }`}\n      >\n        <div className='border-8 border-black border-solid rounded-full w-44 h-44 border-t-transparent animate-spin'></div>\n      </div>\n      <div\n        className={`flex flex-col md:flex-row md:gap-5 ${\n          loading ? 'hidden' : 'visible'\n        }`}\n      >\n        <div className='relative'>\n          <img\n            className={`absolute ${show ? 'opacity-100' : 'opacity-0'}`}\n            alt='black tshirt'\n            src={imageB}\n          />\n          <img className='' alt='black tshirt' src={productDetails.image} />\n          {/* <img\n            className=\"absolute w-16 border-2 border-black left-4 top-4 z-1\"\n            alt=\"black tshirt\"\n            src={show ? imageF : imageB}\n            onClick={handleShow}\n          /> */}\n        </div>\n        <div className='w-4/5 mx-auto md:flex md:flex-col md:justify-between md:mt-8'>\n          <div>\n            <p className='mt-4 text-4xl font-bold '>{productDetails.name}</p>\n            <p className='my-2 text-3xl font-bold '>{`$ ${productDetails.price}`}</p>\n            <p className='my-2 text-lg italic font-medium font-poppins'>{`${productDetails.description}`}</p>\n          </div>\n          <div>\n            <div className='flex justify-around my-8 text-lg text-center'>\n              <SizeSelector\n                detailId={productDetails.id}\n                selected={size}\n                sizes={[\n                  productDetails.S,\n                  productDetails.M,\n                  productDetails.L,\n                  productDetails.XL,\n                ]}\n                setter={setSize}\n              />\n              <AmountInput\n                stock={stockSize}\n                size={size}\n                amount={ammount}\n                setter={setAmmount}\n              />\n            </div>\n\n            <div className='flex flex-col'>\n              <Button\n                className={'justify-center'}\n                type='button'\n                text='AÃ±adir al carrito'\n                onClick={handleCart}\n                name='Carrito'\n                disabled={size === ''}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Details;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}